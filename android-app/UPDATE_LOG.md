# 功能更新说明 - 2025-12-01

## 🎯 核心改进

### 1. 📅 优化的日期时间选择器

- **引入新库**：使用了 `compose-material-dialogs` 库，提供更现代、更符合 Material Design 规范的日期和时间选择体验。
- **操作便捷**：点击日期或时间输入框即可直接弹出选择对话框，无需寻找小图标。
- **视觉统一**：在记录录入、历史筛选、趋势筛选中统一了日期选择器的样式和交互。

### 2. 🔄 交互流程优化

- **自动跳转**：在 `InputScreen` 保存记录成功后，应用会自动跳转到 `HistoryScreen`，方便用户立即查看刚刚添加的记录。
- **点击修复**：修复了筛选界面中日期输入框点击无反应的问题。现在通过覆盖层精确捕获点击事件，确保每次点击都能唤起日期选择器。

### 3. 📊 趋势图表筛选

- **新增筛选**：`ChartScreen` 现在拥有了与 `HistoryScreen` 完全一致的筛选功能。
- **数据同步**：筛选条件在历史记录和趋势图表之间共享。在趋势图中筛选特定时间段或用户，切换到历史记录列表时，筛选条件依然保持，反之亦然。

## 🛠️ 技术细节

### 依赖更新

- 添加了 `io.github.vanpra.compose-material-dialogs:datetime:0.9.0` 用于日期时间选择。

### 代码重构

- **InputScreen**:
  - 集成了 `MaterialDialog` 用于日期和时间选择。
  - 添加了 `navController` 参数用于页面导航。
  - 优化了输入框的点击交互逻辑。
- **HistoryScreen**:
  - 修复了 `OutlinedTextField` 在 `readOnly` 模式下的点击穿透问题。
  - 集成了 `MaterialDialog` 用于日期范围筛选。
- **ChartScreen**:
  - 复制并适配了 `HistoryScreen` 的筛选 UI 逻辑。
  - 实现了筛选状态与 ViewModel 的双向绑定。

## 📱 测试建议

1.  **录入测试**：
    - 进入“记录”页面。
    - 点击日期和时间输入框，确认弹出新的选择器。
    - 填写数据并保存，确认自动跳转到“历史”页面。
2.  **筛选测试**：
    - 在“历史”页面展开筛选，点击开始/结束日期，确认弹出选择器。
    - 选择日期范围并应用，确认列表数据更新。
    - 切换到“趋势”页面，确认筛选面板存在且状态与“历史”页面同步。
    - 在“趋势”页面修改筛选条件，确认图表更新。
3.  **重置测试**：
    - 点击“重置”按钮，确认筛选条件清空，数据恢复默认加载。
